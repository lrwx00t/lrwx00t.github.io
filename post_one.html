<!DOCTYPE html>
<html lang="en">

    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
        crossorigin="anonymous">
    <link rel="stylesheet" href="prism.css">
    <body>
        <header>
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <a class="navbar-brand mx-3" href="index.html"> DotBlog</a>
                <button class="navbar-toggler" type="button"
                    data-toggle="collapse" data-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse"
                    id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="index.html">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <main role="main" class="container">
            <h4></h4>
            <p class="lead"><h1 id="building-a-dns-server-in-rust">Building a DNS server in Rust üêç</h1>
<p>The internet has a rich conceptual foundation, with many exciting ideas that
enable it to function as we know it. One of the really cool ones is DNS. Before
it was invented, everyone on the internet - which admittedly wasn't that many at
that stage - relied on a shared file called HOSTS.TXT, maintained by the Stanford
Research Institute. This file was synchronized manually through FTP, and as the
number of hosts grew, so did the rate of change and the unfeasibility of the
system. In 1983, Paul Mockapetris set out to find a long term solution to the
problem and went on to design and implement DNS. It's a testament to his
genius that his creation has been able to scale from a few thousand
computers to the Internet as we know it today.</p>
<p>With the combined goal of gaining a deep understanding of DNS, of doing
something interesting with Rust, and of scratching some of my own itches,
I originally set out to implement my own DNS server. This document is not
a truthful chronicle of that journey, but rather an idealized version of it,
without all the detours I ended up taking. We'll gradually implement a full
DNS server, starting from first principles.</p>
<ul>
<li><a href="/chapter1.md">Chapter 1 - The DNS protocol</a></li>
<li><a href="/chapter2.md">Chapter 2 - Building a stub resolver</a></li>
<li><a href="/chapter3.md">Chapter 3 - Adding more Record Types</a></li>
<li><a href="/chapter4.md">Chapter 4 - Baby's first DNS server</a></li>
<li><a href="/chapter5.md">Chapter 5 - Recursive Resolve</a></li>
</ul>
<h2 id="samples">Samples</h2>
<p>Each chapter has a corresponding sample which contains the full code up to
that point in the guide, named <code>sample1.rs</code> through <code>sample5.rs</code>. These can be
run using, for first chapter, <code>cargo run --example sample1</code>.</p>
<h2 id="revision-history">Revision History</h2>
<ul>
<li>June 2020 - Fixed a security vulnerability in <code>read_qname</code> which allowed for
a malicious packet to trigger an infinite loop. Modernized the code to
conform to current rust practices, and fixed various ugly inefficiencies.</li>
<li>July 2016 - Initial version</li>
</ul>
<pre><code class="language-go"> // This is a comment, and is ignored by the compiler.
// You can test this code by clicking the "Run" button over there ->
// or if you prefer to use your keyboard, you can use the "Ctrl + Enter"
// shortcut.

// This code is editable, feel free to hack it!
// You can always return to the original code by clicking the "Reset" button ->

// This is the main function.
fn main() {
    // Statements here are executed when the compiled binary is called.

    // Print text to the console.
    println!("Hello World!");
}</code></pre><pre><code class="language-rust">// This is a comment, and is ignored by the compiler.
// You can test this code by clicking the "Run" button over there ->
// or if you prefer to use your keyboard, you can use the "Ctrl + Enter"
// shortcut.

// This code is editable, feel free to hack it!
// You can always return to the original code by clicking the "Reset" button ->

// This is the main function.
fn main() {
    // Statements here are executed when the compiled binary is called.

    // Print text to the console.
    println!("Hello World!");
}</code></pre><pre><code class="language-python"># hello python
def test():
  print("mew")</code></pre></p>
        </main>
        <hr>

        <!-- Footer -->
        <footer class="footer fixed-bottom bg-dark text-white text-center py-2">
            <div class="container">
                <span>¬© 2023 lrwx00t</span>
            </div>
        </footer>

    </body>
    <script
        src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="prism.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
        integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
        crossorigin="anonymous"></script>
</html>